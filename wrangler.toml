name = "omdim"
main = "api/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Bundle yaml files as text
[[rules]]
type = "Text"
globs = ["**/*.yaml", "**/*.yml"]
fallthrough = false

[triggers]
# Prompt: every 30 minutes
# Digest: 2pm UTC daily (handles both daily + weekly based on config)
crons = ["*/30 * * * *", "0 14 * * *"]

# Cleanup runs via HTTP endpoint (free tier limit of 2 crons):
# curl "https://YOUR-URL/api/cron/cleanup?secret=YOUR_CRON_SECRET"

# Environment variables - set secrets via: wrangler secret put <NAME>
# Required secrets:
#   wrangler secret put SLACK_BOT_TOKEN
#   wrangler secret put SLACK_SIGNING_SECRET
#   wrangler secret put DATABASE_URL
# Optional secrets:
#   wrangler secret put CRON_SECRET  # For HTTP-triggered crons (e.g., external cron services)
